<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Callback</title>
</head>
<body>
<script>
  // Captura el fragmento o parámetros de la URL (token o code)
  const params = new URLSearchParams(window.location.search);
  const code = params.get("code");
  const accessToken = params.get("access_token");

  if (code) {
    // Si viene con "code" (OAuth normal)
    window.opener.postMessage({ code }, "*");
  } else if (accessToken) {
    // Si viene con "access_token" (implícito)
    window.opener.postMessage({ accessToken }, "*");
  }

  // Cierra la ventana secundaria
  window.close();
</script>
</body>
</html>
